!function(){"use strict";const e=document.getElementById("source"),t=document.getElementById("graph"),n=document.getElementById("save-svg"),o=document.getElementById("save-png"),a=document.getElementById("save-script"),i=/<svg width="(\d+)pt" height="(\d+)pt"/;let c,d,r,s,l,m;function g(){c=d=l=r=void 0,n.disabled=o.disabled=!0}function u(e){const t=document.createElement("a"),n=e.type;t.download="image/png"===n?"graph.png":"image/svg+xml"===n?"graph.svg":"graph.dot",document.body.appendChild(t);const o=URL.createObjectURL(e);t.href=o,t.click(),document.body.removeChild(t),URL.revokeObjectURL(o)}function v(){clearTimeout(m),m=void 0,s||l||!r||(t.graph=jar.toString())}async function h(){if(l)return p();clearTimeout(s),s=void 0,l=!0,r=void 0;const n=e.value;if(n)try{await t.tryGraph(n)}catch(e){l=!1,r=e,m&&clearTimeout(m),m=setTimeout(v,300)}else t.graph=n,g()}function p(){s&&clearTimeout(s),s=setTimeout(h,300)}t.setAttribute("graph",e.getAttribute("value")),e.addEventListener("input",p),t.addEventListener("render",(async function({detail:e}){l=!1,r=void 0,c=e,n.disabled=!1;try{d=await new Promise((e,t)=>{const n=i.exec(c);if(!n)throw new Error("Unknown SVG size.");const o=document.createElement("canvas");o.width=n[1]/.75,o.height=n[2]/.75;const a=o.getContext("2d"),d=document.createElement("img");d.onload=()=>{try{a.drawImage(d,0,0),o.toBlob(e)}catch(e){t(e)}},d.onerror=()=>t(new Error("PNG conversion failed.")),d.src="data:image/svg+xml;base64,"+btoa(c)}),o.disabled=!1}catch({message:e}){alert(e)}})),t.addEventListener("error",g),n.addEventListener("click",(function(){u(new Blob([c],{type:"image/svg+xml"}))})),o.addEventListener("click",(function(){u(d)})),a.addEventListener("click",(function(){u(new Blob([t.graph],{type:"text/plain"}))}))}();
//# sourceMappingURL=index.min.js.map
