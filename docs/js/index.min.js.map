{"version":3,"file":"index.min.js","sources":["../src/separate-engine.js","../src/script-editor.js","../src/graph.js","../src/prism/prism-core.js","../src/prism/prism-line-numbers.js","../src/prism/prism-match-braces.js","../src/prism/prism-graphviz.js","../src/codejar/codejar.js"],"sourcesContent":["/* c8 ignore next */\nconst { delayWorkerLoading } = window.graphvizWebComponent || {}\nlet renderer, rendererUrl\n\nif (!delayWorkerLoading) setTimeout(getRenderer)\n\nfunction ensureConfiguration () {\n  if (!rendererUrl) {\n    ({\n      rendererUrl = 'https://unpkg.com/graphviz-webcomponent@1.2.1/dist/renderer.min.js'\n    /* c8 ignore next */\n    } = window.graphvizWebComponent || {})\n  }\n}\n\nexport default function getRenderer () {\n  if (!renderer) {\n    ensureConfiguration()\n    renderer = new Worker(rendererUrl)\n  }\n  return renderer\n}\n","import { CodeJar } from './codejar/codejar'\nimport Prism from './prism/prism-core'\nimport lightTheme from './prism/prism-light.css'\nimport lineNumbersStyle from './prism/prism-line-numbers.css'\nimport matchBracesStyle from './prism/prism-match-braces.css'\nimport mainStyle from './script-editor.css'\nimport './prism/prism-line-numbers'\nimport './prism/prism-match-braces'\nimport './prism/prism-graphviz'\n\nconst features = ['line-numbers', 'match-braces', 'rainbow-braces']\nconst connectedKey = Symbol('connecte')\nconst valueKey = Symbol('value')\nconst tabKey = Symbol('tab')\nconst classKey = Symbol('class')\nconst jarKey = Symbol('jar')\nconst widthKey = Symbol('width')\nconst heightKey = Symbol('height')\nconst mousedownKey = Symbol('mousedown')\nconst mouseupKey = Symbol('mouseup')\nlet template, pendingAllLineNumbersUpdate\n\nPrism.codeTag = 'div'\n\nfunction getTemplate () {\n  if (!template) {\n    template = document.createElement('template')\n    template.innerHTML = `<style>\n${lightTheme}\n${lineNumbersStyle}\n${matchBracesStyle}\n${mainStyle}\n</style>\n<pre id=source-wrapper><div id=source></div></pre>`\n  }\n  return template\n}\n\nfunction triggerEvent (element, type, detail) {\n  element.dispatchEvent(new CustomEvent(type, { detail }))\n}\n\nfunction getFeatureClasses (element) {\n  return element.className\n    .trim()\n    .split(/\\s+/)\n    .filter(feature => features.includes(feature))\n    .join(' ')\n}\n\nfunction hasChangedFeatureClass (oldValue, newValue) {\n  /* c8 ignore next */\n  const oldClasses = oldValue ? oldValue.trim().split(/\\s+/) : []\n  const newClasses = newValue.trim().split(/\\s+/)\n  return features.some(feature =>\n    oldClasses.includes(feature) !== newClasses.includes(feature))\n}\n\nfunction normalizeLineBreaks (value) {\n  return value.replace(/\\r?\\n/, '\\n')\n}\n\nfunction createEditor (element) {\n  const ownerRoot = element.shadowRoot\n  const source = ownerRoot.getElementById('source')\n  const featureClasses = getFeatureClasses(element)\n  source.className = `language-graphviz ${featureClasses}`\n  const jar = element[jarKey] = CodeJar(source, Prism.highlightElement, { tab: element.tab, ownerRoot })\n  updateEditor(element)\n  jar.onUpdate(newCode => {\n    newCode = normalizeLineBreaks(newCode)\n    if (element.value !== newCode) {\n      element[valueKey] = newCode\n      triggerEvent(element, 'input', newCode)\n    }\n  })\n}\n\nfunction destroyEditor (element) {\n  element[jarKey].destroy()\n  element[jarKey] = null\n}\n\nfunction rebuildEditor (element) {\n  destroyEditor(element)\n  createEditor(element)\n}\n\nfunction updateEditor (element) {\n  element[jarKey].updateCode(element.value)\n}\n\nfunction configureEditor (element) {\n  element[jarKey].updateOptions({ tab: element.tab })\n}\n\nclass GraphvizScriptEditorElement extends HTMLElement {\n  constructor () {\n    super()\n    this[valueKey] = ''\n    this[tabKey] = '  '\n    this[classKey] = ''\n    this.attachShadow({ mode: 'open' })\n    this.shadowRoot.appendChild(getTemplate().content.cloneNode(true))\n  }\n\n  get value () { return this[valueKey] }\n  set value (value) { this.setAttribute('value', value) }\n\n  get tab () { return this[tabKey] }\n  set tab (value) { this.setAttribute('tab', value) }\n\n  get className () { return this[classKey] }\n  set className (value) { this.setAttribute('class', value) }\n\n  attributeChangedCallback (name, oldValue, newValue) {\n    switch (name) {\n      case 'value':\n        this[valueKey] = normalizeLineBreaks(newValue)\n        if (this[connectedKey]) updateEditor(this)\n        break\n      case 'tab':\n        this[tabKey] = newValue\n        if (this[connectedKey]) configureEditor(this)\n        break\n      case 'class':\n        this[classKey] = newValue\n        if (this[connectedKey] && hasChangedFeatureClass(oldValue, newValue)) rebuildEditor(this)\n        break\n    }\n  }\n\n  connectedCallback () {\n    registerEvents(this)\n    createEditor(this)\n    this[connectedKey] = true\n  }\n\n  disconnectedCallback () {\n    destroyEditor(this)\n    unregisterEvents(this)\n    this[connectedKey] = false\n  }\n\n  static get observedAttributes () { return ['value', 'tab', 'class'] }\n}\n\nfunction rememberSize (element) {\n  element[widthKey] = element.clientWidth\n  element[heightKey] = element.clientHeight\n}\n\nfunction updateLineNumbers (element) {\n  const newWidth = element.clientWidth\n  const newHeight = element.clientHeight\n  if (newWidth !== element[widthKey] || newHeight !== element[heightKey]) {\n    Prism.plugins.lineNumbers.updateLineNumbers(element.shadowRoot.getElementById('source-wrapper'))\n    element[widthKey] = newWidth\n    element[heightKey] = newHeight\n  }\n}\n\nfunction registerEvents (element) {\n  const mousedown = element[mousedownKey] = () => rememberSize(element)\n  const mouseup = element[mouseupKey] = () => updateLineNumbers(element)\n  element.addEventListener('mousedown', mousedown)\n  element.addEventListener('mouseup', mouseup)\n}\n\nfunction unregisterEvents (element) {\n  element.removeEventListener('mouseup', element[mouseupKey])\n  element.removeEventListener('mousedown', element[mousedownKey])\n}\n\nfunction updateAllLineNumbers () {\n  clearTimeout(pendingAllLineNumbersUpdate)\n  const editors = document.querySelectorAll('graphviz-script-editor.line-numbers')\n  for (const editor of editors) updateLineNumbers(editor)\n}\n\nfunction scheduleUpdateAllLineNumbers () {\n  if (pendingAllLineNumbersUpdate) clearTimeout(pendingAllLineNumbersUpdate)\n  pendingAllLineNumbersUpdate = setTimeout(updateAllLineNumbers, 300)\n}\n\naddEventListener('resize', scheduleUpdateAllLineNumbers)\n\ncustomElements.define('graphviz-script-editor', GraphvizScriptEditorElement)\n\nexport default GraphvizScriptEditorElement\n","import getRenderer from './separate-engine'\n\nconst graphKey = Symbol('graph')\nconst scaleKey = Symbol('scale')\n\nfunction requestRendering (element, script, receiveResult) {\n  const renderer = getRenderer()\n  renderer.addEventListener('message', receiveResult)\n  renderer.postMessage({ script: script || element.graph })\n}\n\nfunction closeRendering (receiveResult) {\n  const renderer = getRenderer()\n  renderer.removeEventListener('message', receiveResult)\n}\n\nfunction triggerEvent (element, type, detail) {\n  element.dispatchEvent(new CustomEvent(type, { detail }))\n}\n\nfunction applyScale (element) {\n  const svg = element.shadowRoot.children[0]\n  const scale = element.scale\n  if (svg) {\n    if (scale) {\n      svg.style.transform = `scale(${scale})`\n      svg.style.transformOrigin = 'top left'\n    } else {\n      svg.style.transform = ''\n      svg.style.transformOrigin = ''\n    }\n  }\n}\n\nfunction showImage (element, svg) {\n  element.shadowRoot.innerHTML = svg\n  applyScale(element)\n  triggerEvent(element, 'render', svg)\n}\n\nfunction showError (element, error) {\n  console.error('Graphviz failed:', error)\n  element.shadowRoot.innerHTML = error.message\n  return triggerEvent(element, 'error', error)\n}\n\nfunction updateGraph (element) {\n  return new Promise(resolve => {\n    element.shadowRoot.innerHTML = ''\n    if (!element.graph) return resolve()\n    requestRendering(element, undefined, receiveResult)\n\n    function receiveResult ({ data }) {\n      const { svg, error } = data\n      closeRendering(receiveResult)\n      if (error) {\n        error.message = error.message.trim()\n        showError(element, error)\n        return resolve(error)\n      }\n      showImage(element, svg)\n      resolve(svg)\n    }\n  })\n}\n\nfunction tryUpdateGraph (element, script) {\n  return new Promise((resolve, reject) => {\n    if (!script) {\n      element[graphKey] = ''\n      element.shadowRoot.innerHTML = ''\n      return resolve()\n    }\n    requestRendering(element, script, receiveResult)\n\n    function receiveResult ({ data }) {\n      const { svg, error } = data\n      closeRendering(receiveResult)\n      if (error) return reject(error)\n      element[graphKey] = script\n      showImage(element, svg)\n      resolve(svg)\n    }\n  })\n}\n\nclass GraphvizGraphElement extends HTMLElement {\n  constructor () {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.graphCompleted = Promise.resolve()\n  }\n\n  get graph () { return this[graphKey] }\n  set graph (value) { this.setAttribute('graph', value) }\n\n  get scale () { return this[scaleKey] }\n  set scale (value) { this.setAttribute('scale', value) }\n\n  attributeChangedCallback (name, oldValue, newValue) {\n    switch (name) {\n      case 'graph':\n        this[graphKey] = newValue\n        this.graphCompleted = updateGraph(this).catch(error => error)\n        break\n      case 'scale':\n        this[scaleKey] = newValue\n        applyScale(this)\n    }\n  }\n\n  tryGraph (graph) {\n    const promise = tryUpdateGraph(this, graph)\n    this.graphCompleted = promise.catch(error => error)\n    return promise\n  }\n\n  static get observedAttributes () { return ['graph', 'scale'] }\n}\n\ncustomElements.define('graphviz-graph', GraphvizGraphElement)\n\nexport default GraphvizGraphElement\n","/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n * MIT license http://www.opensource.org/licenses/mit-license.php/\n * @author Lea Verou http://lea.verou.me\n */\n\n// Private helper vars\nvar lang = /\\blang(?:uage)?-([\\w-]+)\\b/i;\nvar uniqueId = 0;\n\nvar _\nexport default _ = {\n\tcodeTag: 'code',\n\n\tutil: {\n\t\tencode: function encode(tokens) {\n\t\t\tif (tokens instanceof Token) {\n\t\t\t\treturn new Token(tokens.type, encode(tokens.content), tokens.alias);\n\t\t\t} else if (Array.isArray(tokens)) {\n\t\t\t\treturn tokens.map(encode);\n\t\t\t} else {\n\t\t\t\treturn tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n\t\t\t}\n\t\t},\n\n\t\ttype: function (o) {\n\t\t\treturn Object.prototype.toString.call(o).slice(8, -1);\n\t\t},\n\n\t\tobjId: function (obj) {\n\t\t\tif (!obj['__id']) {\n\t\t\t\tObject.defineProperty(obj, '__id', { value: ++uniqueId });\n\t\t\t}\n\t\t\treturn obj['__id'];\n\t\t},\n\n\t\t// Deep clone a language definition (e.g. to extend it)\n\t\tclone: function deepClone(o, visited) {\n\t\t\tvar clone, id, type = _.util.type(o);\n\t\t\tvisited = visited || {};\n\n\t\t\tswitch (type) {\n\t\t\t\tcase 'Object':\n\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t}\n\t\t\t\t\tclone = {};\n\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\tfor (var key in o) {\n\t\t\t\t\t\tif (o.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tclone[key] = deepClone(o[key], visited);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn clone;\n\n\t\t\t\tcase 'Array':\n\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t}\n\t\t\t\t\tclone = [];\n\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\to.forEach(function (v, i) {\n\t\t\t\t\t\tclone[i] = deepClone(v, visited);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn clone;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn o;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Returns the Prism language of the given element set by a `language-xxxx` or `lang-xxxx` class.\n\t\t *\n\t\t * If no language is set for the element or the element is `null` or `undefined`, `none` will be returned.\n\t\t *\n\t\t * @param {Element} element\n\t\t * @returns {string}\n\t\t */\n\t\tgetLanguage: function (element) {\n\t\t\twhile (element && !lang.test(element.className)) {\n\t\t\t\telement = element.parentElement;\n\t\t\t}\n\t\t\tif (element) {\n\t\t\t\treturn (element.className.match(lang) || [, 'none'])[1].toLowerCase();\n\t\t\t}\n\t\t\treturn 'none';\n\t\t}\n\t},\n\n\tlanguages: {\n\t\textend: function (id, redef) {\n\t\t\tvar lang = _.util.clone(_.languages[id]);\n\n\t\t\tfor (var key in redef) {\n\t\t\t\tlang[key] = redef[key];\n\t\t\t}\n\n\t\t\treturn lang;\n\t\t},\n\n\t\t/**\n\t\t * Insert a token before another token in a language literal\n\t\t * As this needs to recreate the object (we cannot actually insert before keys in object literals),\n\t\t * we cannot just provide an object, we need an object and a key.\n\t\t * @param inside The key (or language id) of the parent\n\t\t * @param before The key to insert before.\n\t\t * @param insert Object with the key/value pairs to insert\n\t\t * @param root The object that contains `inside`. If equal to Prism.languages, it can be omitted.\n\t\t */\n\t\tinsertBefore: function (inside, before, insert, root) {\n\t\t\troot = root || _.languages;\n\t\t\tvar grammar = root[inside];\n\t\t\tvar ret = {};\n\n\t\t\tfor (var token in grammar) {\n\t\t\t\tif (grammar.hasOwnProperty(token)) {\n\n\t\t\t\t\tif (token == before) {\n\t\t\t\t\t\tfor (var newToken in insert) {\n\t\t\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\n\t\t\t\t\t\t\t\tret[newToken] = insert[newToken];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Do not insert token which also occur in insert. See #1525\n\t\t\t\t\tif (!insert.hasOwnProperty(token)) {\n\t\t\t\t\t\tret[token] = grammar[token];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar old = root[inside];\n\t\t\troot[inside] = ret;\n\n\t\t\t// Update references in other language definitions\n\t\t\t_.languages.DFS(_.languages, function(key, value) {\n\t\t\t\tif (value === old && key != inside) {\n\t\t\t\t\tthis[key] = ret;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t// Traverse a language definition with Depth First Search\n\t\tDFS: function DFS(o, callback, type, visited) {\n\t\t\tvisited = visited || {};\n\n\t\t\tvar objId = _.util.objId;\n\n\t\t\tfor (var i in o) {\n\t\t\t\tif (o.hasOwnProperty(i)) {\n\t\t\t\t\tcallback.call(o, i, o[i], type || i);\n\n\t\t\t\t\tvar property = o[i],\n\t\t\t\t\t    propertyType = _.util.type(property);\n\n\t\t\t\t\tif (propertyType === 'Object' && !visited[objId(property)]) {\n\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\tDFS(property, callback, null, visited);\n\t\t\t\t\t}\n\t\t\t\t\telse if (propertyType === 'Array' && !visited[objId(property)]) {\n\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\tDFS(property, callback, i, visited);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tplugins: {},\n\n\thighlightElement: function(element, callback) {\n\t\t// Find language\n\t\tvar language = _.util.getLanguage(element);\n\t\tvar grammar = _.languages[language];\n\n\t\t// Set language on the element, if not present\n\t\telement.className = element.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n\n\t\t// Set language on the parent, for styling\n\t\tvar parent = element.parentNode;\n\t\tif (parent && parent.nodeName.toLowerCase() === 'pre') {\n\t\t\tparent.className = parent.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n\t\t}\n\n\t\tvar code = element.textContent;\n\n\t\tvar env = {\n\t\t\telement: element,\n\t\t\tlanguage: language,\n\t\t\tgrammar: grammar,\n\t\t\tcode: code\n\t\t};\n\n\t\tfunction insertHighlightedCode(highlightedCode) {\n\t\t\tenv.highlightedCode = highlightedCode;\n\n\t\t\t_.hooks.run('before-insert', env);\n\n\t\t\tenv.element.innerHTML = env.highlightedCode;\n\n\t\t\t_.hooks.run('after-highlight', env);\n\t\t\t_.hooks.run('complete', env);\n\t\t\tcallback && callback.call(env.element);\n\t\t}\n\n\t\t_.hooks.run('before-sanity-check', env);\n\n\t\tif (!env.code) {\n\t\t\t_.hooks.run('complete', env);\n\t\t\tcallback && callback.call(env.element);\n\t\t\treturn;\n\t\t}\n\n\t\t_.hooks.run('before-highlight', env);\n\n\t\tif (!env.grammar) {\n\t\t\tinsertHighlightedCode(_.util.encode(env.code));\n\t\t\treturn;\n\t\t}\n\n\t\tinsertHighlightedCode(_.highlight(env.code, env.grammar, env.language));\n\t},\n\n\thighlight: function (text, grammar, language) {\n\t\tvar env = {\n\t\t\tcode: text,\n\t\t\tgrammar: grammar,\n\t\t\tlanguage: language\n\t\t};\n\t\t_.hooks.run('before-tokenize', env);\n\t\tenv.tokens = _.tokenize(env.code, env.grammar);\n\t\t_.hooks.run('after-tokenize', env);\n\t\treturn Token.stringify(_.util.encode(env.tokens), env.language);\n\t},\n\n\ttokenize: function(text, grammar) {\n\t\tvar rest = grammar.rest;\n\t\tif (rest) {\n\t\t\tfor (var token in rest) {\n\t\t\t\tgrammar[token] = rest[token];\n\t\t\t}\n\n\t\t\tdelete grammar.rest;\n\t\t}\n\n\t\tvar tokenList = new LinkedList();\n\t\taddAfter(tokenList, tokenList.head, text);\n\n\t\tmatchGrammar(text, tokenList, grammar, tokenList.head, 0);\n\n\t\treturn toArray(tokenList);\n\t},\n\n\thooks: {\n\t\tall: {},\n\n\t\tadd: function (name, callback) {\n\t\t\tvar hooks = _.hooks.all;\n\n\t\t\thooks[name] = hooks[name] || [];\n\n\t\t\thooks[name].push(callback);\n\t\t},\n\n\t\trun: function (name, env) {\n\t\t\tvar callbacks = _.hooks.all[name];\n\n\t\t\tif (!callbacks || !callbacks.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var i=0, callback; callback = callbacks[i++];) {\n\t\t\t\tcallback(env);\n\t\t\t}\n\t\t}\n\t},\n\n\tToken: Token\n};\n\nfunction Token(type, content, alias, matchedStr, greedy) {\n\tthis.type = type;\n\tthis.content = content;\n\tthis.alias = alias;\n\t// Copy of the full string this token was created from\n\tthis.length = (matchedStr || '').length|0;\n\tthis.greedy = !!greedy;\n}\n\nToken.stringify = function stringify(o, language) {\n\tif (typeof o == 'string') {\n\t\treturn o;\n\t}\n\tif (Array.isArray(o)) {\n\t\tvar s = '';\n\t\to.forEach(function (e) {\n\t\t\ts += stringify(e, language);\n\t\t});\n\t\treturn s;\n\t}\n\n\tvar env = {\n\t\ttype: o.type,\n\t\tcontent: stringify(o.content, language),\n\t\ttag: 'span',\n\t\tclasses: ['token', o.type],\n\t\tattributes: {},\n\t\tlanguage: language\n\t};\n\n\tvar aliases = o.alias;\n\tif (aliases) {\n\t\tif (Array.isArray(aliases)) {\n\t\t\tArray.prototype.push.apply(env.classes, aliases);\n\t\t} else {\n\t\t\tenv.classes.push(aliases);\n\t\t}\n\t}\n\n\t_.hooks.run('wrap', env);\n\n\tvar attributes = '';\n\tfor (var name in env.attributes) {\n\t\tattributes += ' ' + name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\n\t}\n\n\treturn '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + attributes + '>' + env.content + '</' + env.tag + '>';\n};\n\n/**\n * @param {string} text\n * @param {LinkedList<string | Token>} tokenList\n * @param {any} grammar\n * @param {LinkedListNode<string | Token>} startNode\n * @param {number} startPos\n * @param {boolean} [oneshot=false]\n * @param {string} [target]\n */\nfunction matchGrammar(text, tokenList, grammar, startNode, startPos, oneshot, target) {\n\tfor (var token in grammar) {\n\t\tif (!grammar.hasOwnProperty(token) || !grammar[token]) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar patterns = grammar[token];\n\t\tpatterns = Array.isArray(patterns) ? patterns : [patterns];\n\n\t\tfor (var j = 0; j < patterns.length; ++j) {\n\t\t\tif (target && target == token + ',' + j) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar pattern = patterns[j],\n\t\t\t\tinside = pattern.inside,\n\t\t\t\tlookbehind = !!pattern.lookbehind,\n\t\t\t\tgreedy = !!pattern.greedy,\n\t\t\t\tlookbehindLength = 0,\n\t\t\t\talias = pattern.alias;\n\n\t\t\tif (greedy && !pattern.pattern.global) {\n\t\t\t\t// Without the global flag, lastIndex won't work\n\t\t\t\tvar flags = pattern.pattern.toString().match(/[imsuy]*$/)[0];\n\t\t\t\tpattern.pattern = RegExp(pattern.pattern.source, flags + 'g');\n\t\t\t}\n\n\t\t\tpattern = pattern.pattern || pattern;\n\n\t\t\tfor ( // iterate the token list and keep track of the current token/string position\n\t\t\t\tvar currentNode = startNode.next, pos = startPos;\n\t\t\t\tcurrentNode !== tokenList.tail;\n\t\t\t\tpos += currentNode.value.length, currentNode = currentNode.next\n\t\t\t) {\n\n\t\t\t\tvar str = currentNode.value;\n\n\t\t\t\tif (tokenList.length > text.length) {\n\t\t\t\t\t// Something went terribly wrong, ABORT, ABORT!\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (str instanceof Token) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar removeCount = 1; // this is the to parameter of removeBetween\n\n\t\t\t\tif (greedy && currentNode != tokenList.tail.prev) {\n\t\t\t\t\tpattern.lastIndex = pos;\n\t\t\t\t\tvar match = pattern.exec(text);\n\t\t\t\t\tif (!match) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar from = match.index + (lookbehind && match[1] ? match[1].length : 0);\n\t\t\t\t\tvar to = match.index + match[0].length;\n\t\t\t\t\tvar p = pos;\n\n\t\t\t\t\t// find the node that contains the match\n\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\twhile (from >= p) {\n\t\t\t\t\t\tcurrentNode = currentNode.next;\n\t\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\t}\n\t\t\t\t\t// adjust pos (and p)\n\t\t\t\t\tp -= currentNode.value.length;\n\t\t\t\t\tpos = p;\n\n\t\t\t\t\t// the current node is a Token, then the match starts inside another Token, which is invalid\n\t\t\t\t\tif (currentNode.value instanceof Token) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// find the last node which is affected by this match\n\t\t\t\t\tfor (\n\t\t\t\t\t\tvar k = currentNode;\n\t\t\t\t\t\tk !== tokenList.tail && (p < to || (typeof k.value === 'string' && !k.prev.value.greedy));\n\t\t\t\t\t\tk = k.next\n\t\t\t\t\t) {\n\t\t\t\t\t\tremoveCount++;\n\t\t\t\t\t\tp += k.value.length;\n\t\t\t\t\t}\n\t\t\t\t\tremoveCount--;\n\n\t\t\t\t\t// replace with the new match\n\t\t\t\t\tstr = text.slice(pos, p);\n\t\t\t\t\tmatch.index -= pos;\n\t\t\t\t} else {\n\t\t\t\t\tpattern.lastIndex = 0;\n\n\t\t\t\t\tvar match = pattern.exec(str);\n\t\t\t\t}\n\n\t\t\t\tif (!match) {\n\t\t\t\t\tif (oneshot) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (lookbehind) {\n\t\t\t\t\tlookbehindLength = match[1] ? match[1].length : 0;\n\t\t\t\t}\n\n\t\t\t\tvar from = match.index + lookbehindLength,\n\t\t\t\t\tmatch = match[0].slice(lookbehindLength),\n\t\t\t\t\tto = from + match.length,\n\t\t\t\t\tbefore = str.slice(0, from),\n\t\t\t\t\tafter = str.slice(to);\n\n\t\t\t\tvar removeFrom = currentNode.prev;\n\n\t\t\t\tif (before) {\n\t\t\t\t\tremoveFrom = addAfter(tokenList, removeFrom, before);\n\t\t\t\t\tpos += before.length;\n\t\t\t\t}\n\n\t\t\t\tremoveRange(tokenList, removeFrom, removeCount);\n\n\t\t\t\tvar wrapped = new Token(token, inside ? _.tokenize(match, inside) : match, alias, match, greedy);\n\t\t\t\tcurrentNode = addAfter(tokenList, removeFrom, wrapped);\n\n\t\t\t\tif (after) {\n\t\t\t\t\taddAfter(tokenList, currentNode, after);\n\t\t\t\t}\n\n\n\t\t\t\tif (removeCount > 1)\n\t\t\t\t\tmatchGrammar(text, tokenList, grammar, currentNode.prev, pos, true, token + ',' + j);\n\n\t\t\t\tif (oneshot)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @typedef LinkedListNode\n * @property {T} value\n * @property {LinkedListNode<T> | null} prev The previous node.\n * @property {LinkedListNode<T> | null} next The next node.\n * @template T\n */\n\n/**\n * @template T\n */\nfunction LinkedList() {\n\t/** @type {LinkedListNode<T>} */\n\tvar head = { value: null, prev: null, next: null };\n\t/** @type {LinkedListNode<T>} */\n\tvar tail = { value: null, prev: head, next: null };\n\thead.next = tail;\n\n\t/** @type {LinkedListNode<T>} */\n\tthis.head = head;\n\t/** @type {LinkedListNode<T>} */\n\tthis.tail = tail;\n\tthis.length = 0;\n}\n\n/**\n * Adds a new node with the given value to the list.\n * @param {LinkedList<T>} list\n * @param {LinkedListNode<T>} node\n * @param {T} value\n * @returns {LinkedListNode<T>} The added node.\n * @template T\n */\nfunction addAfter(list, node, value) {\n\t// assumes that node != list.tail && values.length >= 0\n\tvar next = node.next;\n\n\tvar newNode = { value: value, prev: node, next: next };\n\tnode.next = newNode;\n\tnext.prev = newNode;\n\tlist.length++;\n\n\treturn newNode;\n}\n/**\n * Removes `count` nodes after the given node. The given node will not be removed.\n * @param {LinkedList<T>} list\n * @param {LinkedListNode<T>} node\n * @param {number} count\n * @template T\n */\nfunction removeRange(list, node, count) {\n\tvar next = node.next;\n\tfor (var i = 0; i < count && next !== list.tail; i++) {\n\t\tnext = next.next;\n\t}\n\tnode.next = next;\n\tnext.prev = node;\n\tlist.length -= i;\n}\n/**\n * @param {LinkedList<T>} list\n * @returns {T[]}\n * @template T\n */\nfunction toArray(list) {\n\tvar array = [];\n\tvar node = list.head.next;\n\twhile (node !== list.tail) {\n\t\tarray.push(node.value);\n\t\tnode = node.next;\n\t}\n\treturn array;\n}\n","import Prism from './prism-core'\n\n/**\n * Plugin name which is used as a class name for <pre> which is activating the plugin\n * @type {String}\n */\nvar PLUGIN_NAME = 'line-numbers';\n\n/**\n * Regular expression used for determining line breaks\n * @type {RegExp}\n */\nvar NEW_LINE_EXP = /\\n(?!$)/g;\n\n/**\n * Resizes line numbers spans according to height of line of code\n * @param {Element} element <pre> element\n */\nvar _resizeElement = function (element) {\n\tvar codeStyles = getStyles(element);\n\tvar whiteSpace = codeStyles['white-space'];\n\n\tif (whiteSpace === 'pre-wrap' || whiteSpace === 'pre-line') {\n\t\tvar codeElement = element.querySelector(Prism.codeTag);\n\t\tvar lineNumbersWrapper = element.querySelector('.line-numbers-rows');\n\t\tvar lineNumberSizer = element.querySelector('.line-numbers-sizer');\n\t\tvar codeLines = codeElement.textContent.split(NEW_LINE_EXP);\n\n\t\tif (!lineNumberSizer) {\n\t\t\tlineNumberSizer = document.createElement('span');\n\t\t\tlineNumberSizer.className = 'line-numbers-sizer';\n\n\t\t\tcodeElement.appendChild(lineNumberSizer);\n\t\t}\n\n\t\tlineNumberSizer.style.display = 'block';\n\n\t\tcodeLines.forEach(function (line, lineNumber) {\n\t\t\tlineNumberSizer.textContent = line || '\\n';\n\t\t\tvar lineSize = lineNumberSizer.getBoundingClientRect().height;\n\t\t\tlineNumbersWrapper.children[lineNumber].style.height = lineSize + 'px';\n\t\t});\n\n\t\tlineNumberSizer.textContent = '';\n\t\tlineNumberSizer.style.display = 'none';\n\t}\n};\n\n/**\n * Returns style declarations for the element\n * @param {Element} element\n */\nvar getStyles = function (element) {\n\tif (!element) {\n\t\treturn null;\n\t}\n\n\treturn window.getComputedStyle ? getComputedStyle(element) : (element.currentStyle || null);\n};\n\nPrism.hooks.add('complete', function (env) {\n\tif (!env.code) {\n\t\treturn;\n\t}\n\n\tvar code = env.element;\n\tvar pre = code.parentNode;\n\n\t// works only for <code> wrapped inside <pre> (not inline)\n\tif (!pre || !/pre/i.test(pre.nodeName)) {\n\t\treturn;\n\t}\n\n\t// Abort if line numbers already exists\n\tif (code.querySelector('.line-numbers-rows')) {\n\t\treturn;\n\t}\n\n\tvar addLineNumbers = false;\n\tvar lineNumbersRegex = /(?:^|\\s)line-numbers(?:\\s|$)/;\n\n\tfor (var element = code; element; element = element.parentNode) {\n\t\tif (lineNumbersRegex.test(element.className)) {\n\t\t\taddLineNumbers = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// only add line numbers if <code> or one of its ancestors has the `line-numbers` class\n\tif (!addLineNumbers) {\n\t\treturn;\n\t}\n\n\t// Remove the class 'line-numbers' from the <code>\n\tcode.className = code.className.replace(lineNumbersRegex, ' ');\n\t// Add the class 'line-numbers' to the <pre>\n\tif (!lineNumbersRegex.test(pre.className)) {\n\t\tpre.className += ' line-numbers';\n\t}\n\n\tvar match = env.code.match(NEW_LINE_EXP);\n\tvar linesNum = match ? match.length + 1 : 1;\n\tvar lineNumbersWrapper;\n\n\tvar lines = new Array(linesNum + 1).join('<span></span>');\n\n\tlineNumbersWrapper = document.createElement('span');\n\tlineNumbersWrapper.setAttribute('aria-hidden', 'true');\n\tlineNumbersWrapper.className = 'line-numbers-rows';\n\tlineNumbersWrapper.innerHTML = lines;\n\n\tif (pre.hasAttribute('data-start')) {\n\t\tpre.style.counterReset = 'linenumber ' + (parseInt(pre.getAttribute('data-start'), 10) - 1);\n\t}\n\n\tenv.element.appendChild(lineNumbersWrapper);\n\n\t_resizeElement(pre);\n\n\tPrism.hooks.run('line-numbers', env);\n});\n\nPrism.hooks.add('line-numbers', function (env) {\n\tenv.plugins = env.plugins || {};\n\tenv.plugins.lineNumbers = true;\n});\n\n/**\n * Global exports\n */\nPrism.plugins.lineNumbers = {\n\t/**\n\t * Update line numbers after resizing the text area by mouse\n\t * @param {Element} element pre element\n\t * @return {undefined}\n\t */\n\tupdateLineNumbers: function(element) {\n\t\t_resizeElement(element);\n\t},\n\t/**\n\t * Get node for provided line number\n\t * @param {Element} element pre element\n\t * @param {Number} number line number\n\t * @return {Element|undefined}\n\t */\n\tgetLine: function (element, number) {\n\t\tif (element.tagName !== 'PRE' || !element.classList.contains(PLUGIN_NAME)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar lineNumberRows = element.querySelector('.line-numbers-rows');\n\t\tvar lineNumberStart = parseInt(element.getAttribute('data-start'), 10) || 1;\n\t\tvar lineNumberEnd = lineNumberStart + (lineNumberRows.children.length - 1);\n\n\t\tif (number < lineNumberStart) {\n\t\t\tnumber = lineNumberStart;\n\t\t}\n\t\tif (number > lineNumberEnd) {\n\t\t\tnumber = lineNumberEnd;\n\t\t}\n\n\t\tvar lineIndex = number - lineNumberStart;\n\n\t\treturn lineNumberRows.children[lineIndex];\n\t}\n};\n","import Prism from './prism-core'\n\nvar MATCH_ALL_CLASS = /(?:^|\\s)match-braces(?:\\s|$)/;\n\nvar BRACE_HOVER_CLASS = /(?:^|\\s)brace-hover(?:\\s|$)/;\nvar BRACE_SELECTED_CLASS = /(?:^|\\s)brace-selected(?:\\s|$)/;\n\nvar NO_BRACE_HOVER_CLASS = /(?:^|\\s)no-brace-hover(?:\\s|$)/;\nvar NO_BRACE_SELECT_CLASS = /(?:^|\\s)no-brace-select(?:\\s|$)/;\n\nvar PARTNER = {\n\t'(': ')',\n\t'[': ']',\n\t'{': '}',\n};\n\nvar NAMES = {\n\t'(': 'brace-round',\n\t'[': 'brace-square',\n\t'{': 'brace-curly',\n};\n\nvar LEVEL_WARP = 12;\n\nvar pairIdCounter = 0;\n\nvar BRACE_ID_PATTERN = /^(pair-\\d+-)(open|close)$/;\n\n/**\n * Returns the brace partner given one brace of a brace pair.\n *\n * @param {HTMLElement} brace\n * @returns {HTMLElement}\n */\nfunction getPartnerBrace(brace) {\n\tvar match = BRACE_ID_PATTERN.exec(brace.id);\n\treturn brace.parentElement.querySelector('#' + match[1] + (match[2] == 'open' ? 'close' : 'open'));\n}\n\n/**\n * @this {HTMLElement}\n */\nfunction hoverBrace() {\n\tfor (var parent = this.parentElement; parent; parent = parent.parentElement) {\n\t\tif (NO_BRACE_HOVER_CLASS.test(parent.className)) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t[this, getPartnerBrace(this)].forEach(function (ele) {\n\t\tele.className = (ele.className.replace(BRACE_HOVER_CLASS, ' ') + ' brace-hover').replace(/\\s+/g, ' ');\n\t});\n}\n/**\n * @this {HTMLElement}\n */\nfunction leaveBrace() {\n\t[this, getPartnerBrace(this)].forEach(function (ele) {\n\t\tele.className = ele.className.replace(BRACE_HOVER_CLASS, ' ');\n\t});\n}\n/**\n * @this {HTMLElement}\n */\nfunction clickBrace() {\n\tfor (var parent = this.parentElement; parent; parent = parent.parentElement) {\n\t\tif (NO_BRACE_SELECT_CLASS.test(parent.className)) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t[this, getPartnerBrace(this)].forEach(function (ele) {\n\t\tele.className = (ele.className.replace(BRACE_SELECTED_CLASS, ' ') + ' brace-selected').replace(/\\s+/g, ' ');\n\t});\n}\n\nPrism.hooks.add('complete', function (env) {\n\n\t/** @type {HTMLElement} */\n\tvar code = env.element;\n\tvar pre = code.parentElement;\n\n\tif (!pre || pre.tagName != 'PRE') {\n\t\treturn;\n\t}\n\n\t// find the braces to match\n\t/** @type {string[]} */\n\tvar toMatch = [];\n\tfor (var ele = code; ele; ele = ele.parentElement) {\n\t\tif (MATCH_ALL_CLASS.test(ele.className)) {\n\t\t\ttoMatch.push('(', '[', '{');\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (toMatch.length == 0) {\n\t\t// nothing to match\n\t\treturn;\n\t}\n\n\tif (!pre.__listenerAdded) {\n\t\t// code blocks might be highlighted more than once\n\t\tpre.addEventListener('mousedown', function removeBraceSelected() {\n\t\t\t// the code element might have been replaced\n\t\t\tvar code = pre.querySelector(Prism.codeTag);\n\t\t\tArray.prototype.slice.call(code.querySelectorAll('.brace-selected')).forEach(function (element) {\n\t\t\t\telement.className = element.className.replace(BRACE_SELECTED_CLASS, ' ');\n\t\t\t});\n\t\t});\n\t\tObject.defineProperty(pre, '__listenerAdded', { value: true });\n\t}\n\n\t/** @type {HTMLSpanElement[]} */\n\tvar punctuation = Array.prototype.slice.call(code.querySelectorAll('span.token.punctuation'));\n\n\t/** @type {{ index: number, open: boolean, element: HTMLElement }[]} */\n\tvar allBraces = [];\n\n\ttoMatch.forEach(function (open) {\n\t\tvar close = PARTNER[open];\n\t\tvar name = NAMES[open];\n\n\t\t/** @type {[number, number][]} */\n\t\tvar pairs = [];\n\t\t/** @type {number[]} */\n\t\tvar openStack = [];\n\n\t\tfor (var i = 0; i < punctuation.length; i++) {\n\t\t\tvar element = punctuation[i];\n\t\t\tif (element.childElementCount == 0) {\n\t\t\t\tvar text = element.textContent;\n\t\t\t\tif (text === open) {\n\t\t\t\t\tallBraces.push({ index: i, open: true, element: element });\n\t\t\t\t\telement.className += ' ' + name;\n\t\t\t\t\telement.className += ' brace-open';\n\t\t\t\t\topenStack.push(i);\n\t\t\t\t} else if (text === close) {\n\t\t\t\t\tallBraces.push({ index: i, open: false, element: element });\n\t\t\t\t\telement.className += ' ' + name;\n\t\t\t\t\telement.className += ' brace-close';\n\t\t\t\t\tif (openStack.length) {\n\t\t\t\t\t\tpairs.push([i, openStack.pop()]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpairs.forEach(function (pair) {\n\t\t\tvar pairId = 'pair-' + (pairIdCounter++) + '-';\n\n\t\t\tvar openEle = punctuation[pair[0]];\n\t\t\tvar closeEle = punctuation[pair[1]];\n\n\t\t\topenEle.id = pairId + 'open';\n\t\t\tcloseEle.id = pairId + 'close';\n\n\t\t\t[openEle, closeEle].forEach(function (ele) {\n\t\t\t\tele.addEventListener('mouseenter', hoverBrace);\n\t\t\t\tele.addEventListener('mouseleave', leaveBrace);\n\t\t\t\tele.addEventListener('click', clickBrace);\n\t\t\t});\n\t\t});\n\t});\n\n\tvar level = 0;\n\tallBraces.sort(function (a, b) { return a.index - b.index; });\n\tallBraces.forEach(function (brace) {\n\t\tif (brace.open) {\n\t\t\tbrace.element.className += ' brace-level-' + (level % LEVEL_WARP + 1);\n\t\t\tlevel++;\n\t\t} else {\n\t\t\tlevel = Math.max(0, level - 1);\n\t\t\tbrace.element.className += ' brace-level-' + (level % LEVEL_WARP + 1);\n\t\t}\n\t});\n\n});\n","import Prism from './prism-core'\n\nPrism.languages.graphviz = {\n  comment: [{\n    pattern: /\\/\\/(?:[^\\r\\n\\\\]|\\\\(?:\\r\\n?|\\n|(?![\\r\\n])))*|\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n    greedy: true\n  }, {\n    pattern: /(^|[^\\\\:])\\/\\/.*/,\n    lookbehind: !0,\n    greedy: !0\n  }],\n  string: {\n    pattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n    greedy: !0\n  },\n  'class-name': {\n    pattern: /(\\b(?:digraph|graph)\\s+)\\w+/,\n    lookbehind: true\n  },\n  keyword: /\\b(?:digraph|graph|node|edge)\\b/,\n  property: /\\b(?:Damping|URL|area|arrowhead|arrowsize|arrowtail|aspect|bb|bgcolor|center|charset|clusterrank|color|colorscheme|comment|compound|concentrate|constraint|decorate|defaultdist|dim|dimen|dir|diredgeconstraints|distortion|dpi|edgeURL|edgehref|edgetarget|edgetooltip|epsilon|esep|fillcolor|fixedsize|fontcolor|fontname|fontnames|fontpath|fontsize|group|headURL|headclip|headhref|headlabel|headport|headtarget|headtooltip|height|href|id|image|imagepath|imagescale|label|labelURL|labelangle|labeldistance|labelfloat|labelfontcolor|labelfontname|labelfontsize|labelhref|labeljust|labelloc|labeltarget|labeltooltip|landscape|layer|layerlistsep|layers|layerselect|layersep|layout|len|levels|levelsgap|lhead|lheight|lp|ltail|lwidth|margin|maxiter|mclimit|mindist|minlen|mode|model|mosek|nodesep|nojustify|normalize|nslimit|nslimit1|ordering|orientation|outputorder|overlap|overlap_scaling|pack|packmode|pad|page|pagedir|pencolor|penwidth|peripheries|pin|pos|quadtree|quantum|rank|rankdir|ranksep|ratio|rects|regular|remincross|repulsiveforce|resolution|root|rotate|rotation|samehead|sametail|samplepoints|scale|searchsize|sep|shape|shapefile|showboxes|sides|size|skew|smoothing|sortv|splines|start|style|stylesheet|tail_lp|tailURL|tailclip|tailhref|taillabel|tailport|tailtarget|tailtooltip|target|tooltip|truecolor|vertices|viewport|voro_margin|weight|width|xlabel)\\b/,\n  constant: /\\b(?:dot|neato|fdp|sfdp|twopi|circo|osage|patchwork|LR|RL|TB|BT|box|polygon|ellipse|oval|circle|point|egg|triangle|plaintext|plain|diamond|trapezium|parallelogram|house|pentagon|hexagon|septagon|octagon|doublecircle|doubleoctagon|tripleoctagon|invtriangle|invtrapezium|invhouse|Mdiamond|Msquare|Mcircle|rect|rectangle|square|star|none|underline|cylinder|note|tab|folder|box3d|component|promoter|cds|terminator|utr|primersite|restrictionsite|fivepoverhang|threepoverhang|noverhang|assembly|signature|insulator|ribosite|rnastab|proteasesite|proteinstab|rpromoter|rarrow|larrow|lpromoter|solid|dashed|dotted|bold|rounded|diagonals|filled|striped|wedged)\\b/,\n  boolean: /\\b(?:true|yes|false|no)\\b/,\n  number: /\\b0x[\\da-f]+\\b|(?:\\b\\d+\\.?\\d*|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n  operator: /->|--|=/,\n  punctuation: /[{}[\\];(),.:]/\n}\n","export function CodeJar(editor, highlight, opt = {}) {\n    const options = Object.assign({ tab: \"\\t\", ownerRoot: window }, opt);\n    // only Chrome supports shadowRoot.getSelection\n    if (typeof options.ownerRoot.getSelection !== 'function') {\n        options.ownerRoot = options.ownerRoot.ownerDocument;\n        if (typeof options.ownerRoot.getSelection !== 'function') {\n            throw new Error('Impossible to access text selections.');\n        }\n    }\n    let listeners = [];\n    let history = [];\n    let at = -1;\n    let focus = false;\n    let callback;\n    let prev; // code content prior keydown event\n    let isFirefox = navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n    editor.setAttribute(\"contentEditable\", isFirefox ? \"true\" : \"plaintext-only\");\n    editor.setAttribute(\"spellcheck\", \"false\");\n    editor.style.outline = \"none\";\n    editor.style.overflowWrap = \"break-word\";\n    editor.style.overflowY = \"auto\";\n    editor.style.resize = \"vertical\";\n    editor.style.whiteSpace = \"pre-wrap\";\n    highlight(editor);\n    const debounceHighlight = debounce(() => {\n        const pos = save();\n        highlight(editor);\n        restore(pos);\n    }, 30);\n    let recording = false;\n    const shouldRecord = (event) => {\n        return !isUndo(event) && !isRedo(event)\n            && event.key !== \"Meta\"\n            && event.key !== \"Control\"\n            && event.key !== \"Alt\"\n            && !event.key.startsWith(\"Arrow\");\n    };\n    const debounceRecordHistory = debounce((event) => {\n        if (shouldRecord(event)) {\n            recordHistory();\n            recording = false;\n        }\n    }, 300);\n    const on = (type, fn) => {\n        listeners.push([type, fn]);\n        editor.addEventListener(type, fn);\n    };\n    on(\"keydown\", event => {\n        if (event.defaultPrevented)\n            return;\n        prev = toString();\n        handleNewLine(event);\n        handleTabCharacters(event);\n        handleJumpToBeginningOfLine(event);\n        handleSelfClosingCharacters(event);\n        handleUndoRedo(event);\n        if (shouldRecord(event) && !recording) {\n            recordHistory();\n            recording = true;\n        }\n    });\n    on(\"keyup\", event => {\n        if (event.defaultPrevented)\n            return;\n        if (event.isComposing)\n            return;\n        if (prev !== toString())\n            debounceHighlight();\n        debounceRecordHistory(event);\n        if (callback)\n            callback(toString());\n    });\n    on(\"focus\", _event => {\n        focus = true;\n    });\n    on(\"blur\", _event => {\n        focus = false;\n    });\n    on(\"paste\", event => {\n        recordHistory();\n        handlePaste(event);\n        recordHistory();\n        if (callback)\n            callback(toString());\n    });\n    function save() {\n        const s = options.ownerRoot.getSelection();\n        const pos = { start: 0, end: 0, dir: undefined };\n        visit(editor, el => {\n            if (el === s.anchorNode && el === s.focusNode) {\n                pos.start += s.anchorOffset;\n                pos.end += s.focusOffset;\n                pos.dir = s.anchorOffset <= s.focusOffset ? \"->\" : \"<-\";\n                return \"stop\";\n            }\n            if (el === s.anchorNode) {\n                pos.start += s.anchorOffset;\n                if (!pos.dir) {\n                    pos.dir = \"->\";\n                }\n                else {\n                    return \"stop\";\n                }\n            }\n            else if (el === s.focusNode) {\n                pos.end += s.focusOffset;\n                if (!pos.dir) {\n                    pos.dir = \"<-\";\n                }\n                else {\n                    return \"stop\";\n                }\n            }\n            if (el.nodeType === Node.TEXT_NODE) {\n                if (pos.dir != \"->\")\n                    pos.start += el.nodeValue.length;\n                if (pos.dir != \"<-\")\n                    pos.end += el.nodeValue.length;\n            }\n        });\n        return pos;\n    }\n    function restore(pos) {\n        const s = options.ownerRoot.getSelection();\n        let startNode, startOffset = 0;\n        let endNode, endOffset = 0;\n        if (!pos.dir)\n            pos.dir = \"->\";\n        if (pos.start < 0)\n            pos.start = 0;\n        if (pos.end < 0)\n            pos.end = 0;\n        // Flip start and end if the direction reversed\n        if (pos.dir == \"<-\") {\n            const { start, end } = pos;\n            pos.start = end;\n            pos.end = start;\n        }\n        let current = 0;\n        visit(editor, el => {\n            if (el.nodeType !== Node.TEXT_NODE)\n                return;\n            const len = (el.nodeValue || \"\").length;\n            if (current + len >= pos.start) {\n                if (!startNode) {\n                    startNode = el;\n                    startOffset = pos.start - current;\n                }\n                if (current + len >= pos.end) {\n                    endNode = el;\n                    endOffset = pos.end - current;\n                    return \"stop\";\n                }\n            }\n            current += len;\n        });\n        // If everything deleted place cursor at editor\n        if (!startNode)\n            startNode = editor;\n        if (!endNode)\n            endNode = editor;\n        // Flip back the selection\n        if (pos.dir == \"<-\") {\n            [startNode, startOffset, endNode, endOffset] = [endNode, endOffset, startNode, startOffset];\n        }\n        s.setBaseAndExtent(startNode, startOffset, endNode, endOffset);\n    }\n    function beforeCursor() {\n        const s = options.ownerRoot.getSelection();\n        const r0 = s.getRangeAt(0);\n        const r = document.createRange();\n        r.selectNodeContents(editor);\n        r.setEnd(r0.startContainer, r0.startOffset);\n        return r.toString();\n    }\n    function afterCursor() {\n        const s = options.ownerRoot.getSelection();\n        const r0 = s.getRangeAt(0);\n        const r = document.createRange();\n        r.selectNodeContents(editor);\n        r.setStart(r0.endContainer, r0.endOffset);\n        return r.toString();\n    }\n    function handleNewLine(event) {\n        if (event.key === \"Enter\") {\n            const before = beforeCursor();\n            const after = afterCursor();\n            let [padding] = findPadding(before);\n            let newLinePadding = padding;\n            // If last symbol is \"{\" ident new line\n            if (before[before.length - 1] === \"{\") {\n                newLinePadding += options.tab;\n            }\n            if (isFirefox) {\n                preventDefault(event);\n                insert(\"\\n\" + newLinePadding);\n            }\n            else {\n                // Normal browsers\n                if (newLinePadding.length > 0) {\n                    preventDefault(event);\n                    insert(\"\\n\" + newLinePadding);\n                }\n            }\n            // Place adjacent \"}\" on next line\n            if (newLinePadding !== padding && after[0] === \"}\") {\n                const pos = save();\n                insert(\"\\n\" + padding);\n                restore(pos);\n            }\n        }\n    }\n    function handleSelfClosingCharacters(event) {\n        const open = `([{'\"`;\n        const close = `)]}'\"`;\n        const codeAfter = afterCursor();\n        if (close.includes(event.key) && codeAfter.substr(0, 1) === event.key) {\n            const pos = save();\n            preventDefault(event);\n            pos.start = ++pos.end;\n            restore(pos);\n        }\n        else if (open.includes(event.key)) {\n            const pos = save();\n            preventDefault(event);\n            const text = event.key + close[open.indexOf(event.key)];\n            insert(text);\n            pos.start = ++pos.end;\n            restore(pos);\n        }\n    }\n    function handleTabCharacters(event) {\n        if (event.key === \"Tab\") {\n            preventDefault(event);\n            if (event.shiftKey) {\n                const before = beforeCursor();\n                let [padding, start,] = findPadding(before);\n                if (padding.length > 0) {\n                    const pos = save();\n                    // Remove full length tab or just remaining padding\n                    const len = Math.min(options.tab.length, padding.length);\n                    restore({ start, end: start + len });\n                    document.execCommand(\"delete\");\n                    pos.start -= len;\n                    pos.end -= len;\n                    restore(pos);\n                }\n            }\n            else {\n                insert(options.tab);\n            }\n        }\n    }\n    function handleJumpToBeginningOfLine(event) {\n        if (event.key === \"ArrowLeft\" && event.metaKey) {\n            preventDefault(event);\n            const before = beforeCursor();\n            let [padding, start, end] = findPadding(before);\n            if (before.endsWith(padding)) {\n                if (event.shiftKey) {\n                    const pos = save();\n                    restore({ start, end: pos.end }); // Select from line start.\n                }\n                else {\n                    restore({ start, end: start }); // Jump to line start.\n                }\n            }\n            else {\n                if (event.shiftKey) {\n                    const pos = save();\n                    restore({ start: end, end: pos.end }); // Select from beginning of text.\n                }\n                else {\n                    restore({ start: end, end }); // Jump to beginning of text.\n                }\n            }\n        }\n    }\n    function handleUndoRedo(event) {\n        if (isUndo(event)) {\n            preventDefault(event);\n            at--;\n            const record = history[at];\n            if (record) {\n                editor.innerHTML = record.html;\n                restore(record.pos);\n            }\n            if (at < 0)\n                at = 0;\n        }\n        if (isRedo(event)) {\n            preventDefault(event);\n            at++;\n            const record = history[at];\n            if (record) {\n                editor.innerHTML = record.html;\n                restore(record.pos);\n            }\n            if (at >= history.length)\n                at--;\n        }\n    }\n    function recordHistory() {\n        if (!focus)\n            return;\n        const html = editor.innerHTML;\n        const pos = save();\n        const lastRecord = history[at];\n        if (lastRecord) {\n            if (lastRecord.html === html\n                && lastRecord.pos.start === pos.start\n                && lastRecord.pos.end === pos.end)\n                return;\n        }\n        at++;\n        history[at] = { html, pos };\n        history.splice(at + 1);\n        const maxHistory = 300;\n        if (at > maxHistory) {\n            at = maxHistory;\n            history.splice(0, 1);\n        }\n    }\n    function handlePaste(event) {\n        preventDefault(event);\n        const text = (event.originalEvent || event).clipboardData.getData(\"text/plain\");\n        const pos = save();\n        insert(text);\n        highlight(editor);\n        restore({ start: pos.end + text.length, end: pos.end + text.length });\n    }\n    function visit(editor, visitor) {\n        const queue = [];\n        if (editor.firstChild)\n            queue.push(editor.firstChild);\n        let el = queue.pop();\n        while (el) {\n            if (visitor(el) === \"stop\")\n                break;\n            if (el.nextSibling)\n                queue.push(el.nextSibling);\n            if (el.firstChild)\n                queue.push(el.firstChild);\n            el = queue.pop();\n        }\n    }\n    function isCtrl(event) {\n        return event.metaKey || event.ctrlKey;\n    }\n    function isUndo(event) {\n        return isCtrl(event) && !event.shiftKey && event.code === \"KeyZ\";\n    }\n    function isRedo(event) {\n        return isCtrl(event) && event.shiftKey && event.code === \"KeyZ\";\n    }\n    function insert(text) {\n        text = text\n            .replace(/&/g, \"&amp;\")\n            .replace(/</g, \"&lt;\")\n            .replace(/>/g, \"&gt;\")\n            .replace(/\"/g, \"&quot;\")\n            .replace(/'/g, \"&#039;\");\n        document.execCommand(\"insertHTML\", false, text);\n    }\n    function debounce(cb, wait) {\n        let timeout = 0;\n        return (...args) => {\n            clearTimeout(timeout);\n            timeout = setTimeout(() => cb(...args), wait);\n        };\n    }\n    function findPadding(text) {\n        // Find beginning of previous line.\n        let i = text.length - 1;\n        while (i >= 0 && text[i] !== \"\\n\")\n            i--;\n        i++;\n        // Find padding of the line.\n        let j = i;\n        while (j < text.length && /[ \\t]/.test(text[j]))\n            j++;\n        return [text.substring(i, j) || \"\", i, j];\n    }\n    function toString() {\n        return editor.textContent || \"\";\n    }\n    function preventDefault(event) {\n        event.preventDefault();\n    }\n    return {\n        updateOptions(options) {\n            options = Object.assign(Object.assign({}, options), options);\n        },\n        updateCode(code) {\n            editor.textContent = code;\n            highlight(editor);\n        },\n        onUpdate(cb) {\n            callback = cb;\n        },\n        toString,\n        destroy() {\n            for (let [type, fn] of listeners) {\n                editor.removeEventListener(type, fn);\n            }\n        },\n    };\n}\n"],"names":["renderer","rendererUrl","template","pendingAllLineNumbersUpdate","delayWorkerLoading","window","graphvizWebComponent","getRenderer","Worker","setTimeout","graphKey","Symbol","scaleKey","requestRendering","element","script","receiveResult","addEventListener","postMessage","graph","closeRendering","removeEventListener","triggerEvent","type","detail","dispatchEvent","CustomEvent","applyScale","svg","shadowRoot","children","scale","style","transform","transformOrigin","showImage","innerHTML","GraphvizGraphElement","HTMLElement","constructor","attachShadow","mode","graphCompleted","Promise","resolve","value","setAttribute","attributeChangedCallback","name","oldValue","newValue","updateGraph","undefined","data","error","message","trim","console","catch","tryGraph","promise","reject","observedAttributes","customElements","define","_","lang","uniqueId","Prism","codeTag","util","encode","tokens","Token","content","alias","Array","isArray","map","replace","o","Object","prototype","toString","call","slice","objId","obj","defineProperty","clone","deepClone","visited","id","key","hasOwnProperty","forEach","v","i","getLanguage","test","className","parentElement","match","toLowerCase","languages","extend","redef","insertBefore","inside","before","insert","root","grammar","ret","token","newToken","old","DFS","callback","property","propertyType","plugins","highlightElement","language","parent","parentNode","nodeName","code","textContent","env","insertHighlightedCode","highlightedCode","hooks","run","highlight","text","tokenize","stringify","rest","tokenList","LinkedList","addAfter","head","matchGrammar","startNode","startPos","oneshot","target","patterns","j","length","pattern","lookbehind","greedy","lookbehindLength","global","flags","RegExp","source","currentNode","next","pos","tail","str","removeCount","prev","lastIndex","exec","from","index","to","p","k","after","removeFrom","removeRange","list","node","count","wrapped","toArray","array","push","all","add","callbacks","matchedStr","newNode","s","e","tag","classes","attributes","aliases","apply","join","NEW_LINE_EXP","_resizeElement","whiteSpace","codeStyles","getStyles","codeElement","querySelector","lineNumbersWrapper","lineNumberSizer","codeLines","split","document","createElement","appendChild","display","line","lineNumber","lineSize","getBoundingClientRect","height","getComputedStyle","currentStyle","pre","addLineNumbers","lineNumbersRegex","lines","linesNum","hasAttribute","counterReset","parseInt","getAttribute","lineNumbers","updateLineNumbers","getLine","number","tagName","classList","contains","lineNumberRows","lineNumberStart","lineNumberEnd","lineIndex","MATCH_ALL_CLASS","BRACE_HOVER_CLASS","BRACE_SELECTED_CLASS","NO_BRACE_HOVER_CLASS","NO_BRACE_SELECT_CLASS","PARTNER","NAMES","pairIdCounter","BRACE_ID_PATTERN","getPartnerBrace","brace","hoverBrace","ele","leaveBrace","clickBrace","toMatch","__listenerAdded","querySelectorAll","punctuation","allBraces","open","close","pairs","openStack","childElementCount","pop","pair","pairId","openEle","closeEle","level","sort","a","b","Math","max","graphviz","comment","string","keyword","constant","boolean","operator","features","connectedKey","valueKey","tabKey","classKey","jarKey","widthKey","heightKey","mousedownKey","mouseupKey","normalizeLineBreaks","createEditor","ownerRoot","getElementById","featureClasses","filter","feature","includes","jar","CodeJar","editor","opt","options","assign","tab","getSelection","ownerDocument","Error","listeners","history","at","focus","isFirefox","navigator","userAgent","indexOf","outline","overflowWrap","overflowY","resize","debounceHighlight","debounce","save","restore","recording","shouldRecord","event","isUndo","isRedo","startsWith","debounceRecordHistory","recordHistory","on","fn","start","end","dir","visit","el","anchorNode","focusNode","anchorOffset","focusOffset","nodeType","Node","TEXT_NODE","nodeValue","startOffset","endNode","endOffset","current","len","setBaseAndExtent","beforeCursor","r0","getRangeAt","r","createRange","selectNodeContents","setEnd","startContainer","afterCursor","setStart","endContainer","html","lastRecord","splice","visitor","queue","firstChild","nextSibling","isCtrl","metaKey","ctrlKey","shiftKey","execCommand","cb","wait","timeout","args","clearTimeout","findPadding","substring","preventDefault","defaultPrevented","handleNewLine","padding","newLinePadding","handleTabCharacters","min","handleJumpToBeginningOfLine","endsWith","handleSelfClosingCharacters","codeAfter","substr","handleUndoRedo","record","isComposing","_event","handlePaste","originalEvent","clipboardData","getData","updateOptions","updateCode","onUpdate","destroy","updateEditor","newCode","destroyEditor","GraphvizScriptEditorElement","getTemplate","cloneNode","configureEditor","hasChangedFeatureClass","oldClasses","newClasses","some","connectedCallback","registerEvents","mousedown","clientWidth","clientHeight","mouseup","disconnectedCallback","newWidth","newHeight","updateAllLineNumbers","editors"],"mappings":"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"}